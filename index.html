<!DOCTYPE html>
<html>

<head>
    <title>Flow Rate Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .container_div {
            flex-basis: 48%;
            background-color: #c0c0c0;
            border-radius: 8px;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #333;
        }

        h2 {
            color: #555;
        }

        div {
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #666;
        }

        input[type="number"] {
            font-size: medium;
            width: 90%;
            padding: 8px;
            margin: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        select {
            font-size: medium;
            width: 90%;
            padding: 8px;
            margin: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        button {
            font-size: medium;
            padding: 10px 20px;
            border: none;
            background-color: #4caf50;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #708f72;
        }

        p {
            margin-top: 10px;
            color: #333;
        }

        input[type="number"].no-spinner::-webkit-inner-spin-button,
        input[type="number"].no-spinner::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type="number"].no-spinner {
            -moz-appearance: textfield;
            appearance: textField;
        }
    </style>
</head>


<body>

    <div id="flow_rate">
        <h1>Flow Rate Calculator</h1>
        <div class="container">
            <div class="container_div">
                <form id="addFixturesForm" onsubmit="addFixtures()">
                    <h2>Fixture Flow Rate Calculation</h2>
                    <div>
                        <label for="occupancy">Select Occupancy:</label>
                        <select id="occupancy" onchange="populateFixtures()" required>
                            <option value="">Select Occupancy</option>
                            <option value="Private">Private</option>
                            <option value="Public">Public</option>
                            <option value="Office, etc">Office, etc</option>
                            <option value="Hotel, restaurant">Hotel, restaurant</option>
                        </select>
                        <br><br>

                        <label for="fixtures">Select Fixture:</label>
                        <select id="fixtures" onchange="populateSupplyControl()" required>
                            <!-- Fixture options will be populated based on the selected occupancy -->
                        </select>
                        <br><br>

                        <label for="supplyControl">Type of Supply Control:</label>
                        <select id="supplyControl" required>
                            <!-- Supply control options will be populated based on the selected fixture -->
                        </select>
                        <br><br>

                        <label for="numberOfFixtures">Number of Fixtures:</label>
                        <input type="number" id="numberOfFixtures" class="no-spinner" placeholder="Enter number"
                            required>
                        <br><br>

                        <button type="submit">Add Fixture</button>
                </form>
            </div>
            <p id="addedFixtures"></p>
            <button onclick="calculateFixtureFlow()">Calculate Fixture Flow Rate</button>
            <h3 id="fixtureResult"></h3>

        </div>
        <div class="container_div">
            <form id="irrigationForm" onsubmit="calculateIrrigationFlow()">
                <h2>Irrigation Calculation</h2>
                <div>
                    <label for="irrigation_sprinklers">Number of Sprinklers:</label>
                    <input type="number" id="irrigation_sprinklers" class="no-spinner" placeholder="Enter number"
                        required><br><br>

                    <label for="irrigation_flow_rate">Flow Rate (GPM):</label>
                    <input type="number" id="irrigation_flow_rate" class="no-spinner" placeholder="Enter number"
                        required step="any"><br><br>

                    <label for="irrigation_duration">Duration (Minutes):</label>
                    <input type="number" id="irrigation_duration" class="no-spinner" placeholder="Enter number" required
                        step="any"><br><br>
                </div>
                <button type="submit">Calculate Irrigation Flow Rate</button>
            </form>
            <h3 id="irrigationResult"></h3>

            <h3>Or</h3>

            <h2>Total Irrigation Flow Rate</h2>
            <div>
                <label for="total_irrigation_flow_rate">Total Flow Rate (GPM):</label>
                <input type="number" id="total_irrigation_flow_rate" class="no-spinner" placeholder="Enter number"
                    required step="any"><br><br>
            </div>
            <button onclick="calculateTotalPumpFlow()">Calculate Total Pump Flow Rate</button>
            <h2 id="pumpResult"></h2>
        </div>
    </div>
    </div>

    <div id="day_tank">
        <h1>Day Tank Calculation</h1>
        <div class="container">
            <div class="container_div">
                <form id="dayTankDischargeForm" onsubmit="calculateDayTankDischargeSide()">
                    <h2>Discharge Side</h2>
                    <div>
                        <label for="day_tank_discharge_lf_pr">Pressure Requirement (psi):</label>
                        <input type="number" id="day_tank_discharge_lf_pr" class="no-spinner" placeholder="Enter number"
                            required step="any"><br><br>

                        <label for="day_tank_discharge_lf_hp">Height from Pump (ft):</label>
                        <input type="number" id="day_tank_discharge_lf_hp" class="no-spinner" placeholder="Enter number"
                            required step="any"><br><br>

                        <label for="day_tank_discharge_tpr">Total Pipe Run (ft):</label>
                        <input type="number" id="day_tank_discharge_tpr" class="no-spinner" placeholder="Enter number"
                            required step="any" required step="any" onchange="DayTankDischargeLossesFittings()"><br><br>

                        <label for="day_tank_discharge_lov">Losses on Valves (psi):</label>
                        <input type="number" id="day_tank_discharge_lov" class="no-spinner" placeholder="Enter number"
                            required step="any"><br><br>

                        <label for="day_tank_discharge_lof">Losses on Fittings (ft):</label>
                        <input type="number" id="day_tank_discharge_lof" class="no-spinner" placeholder="Enter number"
                            required step="any"><br><br>

                    </div>
                    <button type="submit">Calculate Discharge Side</button>
                </form>
                <h3 id="DayTankDischargeResult"></h3>

            </div>
            <div class="container_div">
                <form id="dayTankSuctionForm" onsubmit="calculateDayTankSuctionSide()">
                    <h2>Suction Side</h2>
                    <div>
                        <label for="day_tank_suction_h">Head at Suction Side (ft):</label>
                        <input type="number" id="day_tank_suction_h" class="no-spinner" placeholder="Enter number"
                            required step="any"><br><br>

                        <label for="day_tank_suction_tpr">Total Pipe Run (ft):</label>
                        <input type="number" id="day_tank_suction_tpr" class="no-spinner" placeholder="Enter number"
                            required step="any" required step="any" onchange="DayTankSuctionLossesFittings()"><br><br>

                        <label for="day_tank_suction_lov">Losses on Valves (psi):</label>
                        <input type="number" id="day_tank_suction_lov" class="no-spinner" placeholder="Enter number"
                            required step="any"><br><br>

                        <label for="day_tank_suction_lof">Losses on Fittings (ft):</label>
                        <input type="number" id="day_tank_suction_lof" class="no-spinner" placeholder="Enter number"
                            required step="any"><br><br>
                    </div>
                    <button type="submit">Calculate Suction Side</button>
                </form>
                <h3 id="DayTankSuctionResult"></h3>


                <button onclick="DayTankTotalHeadBoosterPumpResult()"> Calculate Day Tank Total Head of Booster
                    Pump</button>
                <h2 id="DayTankTotalHeadBoosterPumpResult"></h2>
            </div>
        </div>
    </div>
    <!-- <div class="">
        <div>
            <button onclick="flowRateDayTankChartV190()">Flow Rate | Day Tank Chart V190</button>
            <canvas id="frdtv190" width="575" height="375"></canvas>
        </div>
        <div>
            <button onclick="flowRateDayTankChartV110()">Flow Rate | Day Tank Chart V110</button>
            <canvas id="frdtv110" width="650" height="400"></canvas>
        </div>
    </div> -->

    <div id="municipal_line">
        <h1>Municipal Line Calculation</h1>
        <div class="container">
            <div class="container_div">
                <form id="municipalLineDischargeForm" onsubmit="calculateMunicipalLineDischargeSide()">
                    <h2>Discharge Side</h2>
                    <div>
                        <label for="municipal_line_discharge_lf_pr">Pressure Requirement (psi):</label>
                        <input type="number" id="municipal_line_discharge_lf_pr" class="no-spinner"
                            placeholder="Enter number" required step="any"><br><br>

                        <label for="municipal_line_discharge_lf_hp">Height from Pump (ft):</label>
                        <input type="number" id="municipal_line_discharge_lf_hp" class="no-spinner"
                            placeholder="Enter number" required step="any"><br><br>

                        <label for="municipal_line_discharge_tpr">Total Pipe Run (ft):</label>
                        <input type="number" id="municipal_line_discharge_tpr" class="no-spinner"
                            placeholder="Enter number" required step="any"
                            onchange="MunicipalLineDischargeLossesFittings()"><br><br>

                        <label for="municipal_line_discharge_lof">Losses on Fittings (ft):</label>
                        <input type="number" id="municipal_line_discharge_lof" class="no-spinner"
                            placeholder="Enter number" required step="any"><br><br>

                    </div>
                    <button type="submit">Calculate Discharge Side</button>
                </form>
                <h3 id="MunicipalLineDischargeResult"></h3>

            </div>
            <div class="container_div">
                <form id="municipalLineSuctionForm" onsubmit="calculateMunicipalLineSuctionSide()">
                    <h2>Suction Side</h2>
                    <div>
                        <label for="municipal_line_suction_p">Municipal Line Pressure (psi):</label>
                        <input type="number" id="municipal_line_suction_p" class="no-spinner" placeholder="Enter number"
                            required step="any"><br><br>

                        <label for="municipal_line_suction_tpr">Total Pipe Run (ft):</label>
                        <input type="number" id="municipal_line_suction_tpr" class="no-spinner"
                            placeholder="Enter number" required step="any"
                            onchange="MunicipalLineSuctionLossesFittings()"><br><br>

                        <label for="municipal_line_suction_lof">Losses on Fittings (ft):</label>
                        <input type="number" id="municipal_line_suction_lof" class="no-spinner"
                            placeholder="Enter number" required step="any"><br><br>
                    </div>
                    <button type="submit">Calculate Suction Side</button>
                </form>
                <h3 id="MunicipalLineSuctionResult"></h3>


                <button onclick="MunicipalLineTotalHeadBoosterPumpResult()"> Calculate Day Tank Total Head of Booster
                    Pump</button>
                <h2 id="MunicipalLineTotalHeadBoosterPumpResult"></h2>
            </div>
        </div>
    </div>

    <!-- <div class="">
        <div>
            <button onclick="flowRateMunicipalLineChartV190()">Flow Rate | Municipal Line Chart V190</button>
            <canvas id="frmlv190" width="575" height="375"></canvas>
        </div>
        <div>
            <button onclick="flowRateMunicipalLineChartV110()">Flow Rate | Municipal Line Chart V110</button>
            <canvas id="frmlv110" width="650" height="400"></canvas>
        </div>
    </div> -->
    <button onclick="printPage()">Print</button>

    <script>

        const fixturesData = [
            {
                "OCCUPANCY": "Private",
                "FIXTURE": "Bathtub",
                "SUPPLY_CONTROL": "Faucet",
                "LOAD_VALUES": 1.4
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Bathroom group",
                "SUPPLY_CONTROL": "Flush tank",
                "LOAD_VALUES": 3.6
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Bathroom group",
                "SUPPLY_CONTROL": "Flushometer valve",
                "LOAD_VALUES": 8
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Bidet",
                "SUPPLY_CONTROL": "Faucet",
                "LOAD_VALUES": 2
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Combination fixture",
                "SUPPLY_CONTROL": "Faucet",
                "LOAD_VALUES": 3
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Dishwashing machine",
                "SUPPLY_CONTROL": "Automatic",
                "LOAD_VALUES": 1.4
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Kitchen sink",
                "SUPPLY_CONTROL": "Faucet",
                "LOAD_VALUES": 1.4
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Laundry trays (1 to 3)",
                "SUPPLY_CONTROL": "Faucet",
                "LOAD_VALUES": 1.4
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Lavatory",
                "SUPPLY_CONTROL": "Faucet",
                "LOAD_VALUES": 0.7
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Shower head",
                "SUPPLY_CONTROL": "Mixing valve",
                "LOAD_VALUES": 1.4
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Washing machine (8 lb)",
                "SUPPLY_CONTROL": "Automatic",
                "LOAD_VALUES": 1.4
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Water closet",
                "SUPPLY_CONTROL": "Flushometer tank",
                "LOAD_VALUES": 2
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Water closet",
                "SUPPLY_CONTROL": "Flush tank",
                "LOAD_VALUES": 2.2
            }, {
                "OCCUPANCY": "Private",
                "FIXTURE": "Water closet",
                "SUPPLY_CONTROL": "Flushometer valve",
                "LOAD_VALUES": 6
            }, {
                "OCCUPANCY": "Public",
                "FIXTURE": "Bathtub",
                "SUPPLY_CONTROL": "Faucet",
                "LOAD_VALUES": 4
            }, {
                "OCCUPANCY": "Public",
                "FIXTURE": "Lavatory",
                "SUPPLY_CONTROL": "Faucet",
                "LOAD_VALUES": 2
            }, {
                "OCCUPANCY": "Public",
                "FIXTURE": "Shower head",
                "SUPPLY_CONTROL": "Mixing valve",
                "LOAD_VALUES": 4
            }, {
                "OCCUPANCY": "Public",
                "FIXTURE": "Urinal",
                "SUPPLY_CONTROL": "Flush tank",
                "LOAD_VALUES": 3
            }, {
                "OCCUPANCY": "Public",
                "FIXTURE": "Urinal",
                "SUPPLY_CONTROL": '1 inch flushometer valve',
                "LOAD_VALUES": 10
            }, {
                "OCCUPANCY": "Public",
                "FIXTURE": "Urinal",
                "SUPPLY_CONTROL": '3/4 inch flushometer valve',
                "LOAD_VALUES": 5
            }, {
                "OCCUPANCY": "Public",
                "FIXTURE": "Washing machine (8 lb)",
                "SUPPLY_CONTROL": "Automatic",
                "LOAD_VALUES": 3
            }, {
                "OCCUPANCY": "Public",
                "FIXTURE": "Washing machine (15 lb)",
                "SUPPLY_CONTROL": "Automatic",
                "LOAD_VALUES": 4
            }, {
                "OCCUPANCY": "Public",
                "FIXTURE": "Water closet",
                "SUPPLY_CONTROL": "Flushometer valve",
                "LOAD_VALUES": 10
            }, {
                "OCCUPANCY": "Public",
                "FIXTURE": "Water closet",
                "SUPPLY_CONTROL": "Flush tank",
                "LOAD_VALUES": 5
            }, {
                "OCCUPANCY": "Public",
                "FIXTURE": "Water closet",
                "SUPPLY_CONTROL": "Flushometer tank",
                "LOAD_VALUES": 2
            }, {
                "OCCUPANCY": "Office, etc",
                "FIXTURE": "Drinking fountain",
                "SUPPLY_CONTROL": '3/8 inch valve',
                "LOAD_VALUES": 0.25
            }, {
                "OCCUPANCY": "Office, etc",
                "FIXTURE": "Service sink",
                "SUPPLY_CONTROL": "Faucet",
                "LOAD_VALUES": 3
            }, {
                "OCCUPANCY": "Hotel, restaurant",
                "FIXTURE": "Kitchen sink",
                "SUPPLY_CONTROL": "Faucet",
                "LOAD_VALUES": 4
            }
        ];

        const occupancyArray = {

            "Private": {
                "fixtures": [
                    "Bathtub",
                    "Bathroom group",
                    "Bidet",
                    "Combination fixture",
                    "Dishwashing machine",
                    "Kitchen sink",
                    "Laundry trays (1 to 3)",
                    "Lavatory",
                    "Shower head",
                    "Washing machine (8 lb)",
                    "Water closet"

                ]
            },

            "Public": {
                "fixtures": [
                    "Bathtub",
                    "Lavatory",
                    "Shower head",
                    "Urinal",
                    "Washing machine (8 lb)",
                    "Washing machine (15 lb)",
                    "Water closet"
                ]
            },

            "Office, etc": {
                "fixtures": [
                    "Drinking fountain",
                    "Service sink"
                ]
            },

            "Hotel, restaurant": {
                "fixtures": [
                    "Kitchen sink"
                ]
            }
        };

        const supplyControlArray = {
            "Bathtub": {
                "supplyControls": ["Faucet"]
            },
            "Bathroom group": {
                "supplyControls": ["Flush tank", "Flushometer valve"]
            },
            "Bidet": {
                "supplyControls": ["Faucet"]
            },
            "Combination fixture": {
                "supplyControls": ["Faucet"]
            },
            "Dishwashing machine": {
                "supplyControls": ["Automatic"]
            },
            "Kitchen sink": {
                "supplyControls": ["Faucet"]
            },
            "Laundry trays (1 to 3)": {
                "supplyControls": ["Faucet"]
            },
            "Lavatory": {
                "supplyControls": ["Faucet"]
            },
            "Shower head": {
                "supplyControls": ["Mixing valve"]
            },
            "Washing machine (8 lb)": {
                "supplyControls": ["Automatic"]
            },
            "Washing machine (15 lb)": {
                "supplyControls": ["Automatic"]
            },
            "Water closet": {
                "supplyControls": ["Flushometer tank", "Flush tank", "Flushometer valve"]
            },
            "Urinal": {
                "supplyControls": ["Flush tank", '1 inch flushometer valve', '3/4 inch flushometer valve']
            },
            "Drinking fountain": {
                "supplyControls": ['3/8 inch valve']
            },
            "Service sink": {
                "supplyControls": ["Faucet"]
            }
        };

        let fixturesTotalWSFU = [];

        function populateFixtures() {
            const selectedOccupancy = document.getElementById('occupancy').value;
            const fixturesDropdown = document.getElementById('fixtures');
            const supplyControlDropdown = document.getElementById('supplyControl');

            // Clear previous options
            fixturesDropdown.innerHTML = '';
            supplyControlDropdown.innerHTML = '';

            if (selectedOccupancy) {
                const selectedOccupancyData = occupancyArray[selectedOccupancy];

                selectedOccupancyData.fixtures.forEach(fixture => {
                    // Populate fixture options based on selected occupancy
                    const fixtureOption = document.createElement('option');
                    fixtureOption.value = fixture;
                    fixtureOption.textContent = fixture;
                    fixturesDropdown.appendChild(fixtureOption);
                });

                populateSupplyControl();
            }
        }

        function populateSupplyControl() {
            const selectedFixtures = document.getElementById('fixtures').value;
            const supplyControlDropdown = document.getElementById('supplyControl');

            // Clear previous options
            supplyControlDropdown.innerHTML = '';

            if (selectedFixtures) {
                const selectedFixtureData = supplyControlArray[selectedFixtures];

                selectedFixtureData.supplyControls.forEach(sc => {
                    // Populate fixture options based on selected occupancy
                    const supplyControlOption = document.createElement('option');
                    supplyControlOption.value = sc;
                    supplyControlOption.textContent = sc;
                    supplyControlDropdown.appendChild(supplyControlOption);
                });
            }
        }

        function findMatchingFixture(occupancy, fixture, supplyControl) {
            return fixturesData.find((f) =>
                f.OCCUPANCY === occupancy &&
                f.FIXTURE === fixture &&
                f.SUPPLY_CONTROL === supplyControl
            );
        }

        function addFixtures() {
            event.preventDefault()
            const occupancy = document.getElementById('occupancy').value;
            const fixture = document.getElementById('fixtures').value;
            const supplyControl = document.getElementById('supplyControl').value;
            const numberOfFixtures = parseFloat(document.getElementById('numberOfFixtures').value);

            let matchingFixture = findMatchingFixture(occupancy, fixture, supplyControl);

            matchingFixture.TOTAL_WSFU = (matchingFixture.LOAD_VALUES * numberOfFixtures).toFixed(2);
            matchingFixture.NoF = numberOfFixtures;
            fixturesTotalWSFU.push(matchingFixture);

            let display = '';
            fixturesTotalWSFU.forEach((fixture, index) => {
                display += `${index + 1}) `;
                display += ` O: ${fixture.OCCUPANCY} |`;
                display += ` F: ${fixture.FIXTURE} |`;
                display += ` SC: ${fixture.SUPPLY_CONTROL} |`;
                display += ` LV: ${fixture.LOAD_VALUES} |`;
                display += ` NoF: ${fixture.NoF} |`;
                display += ` T: ${fixture.TOTAL_WSFU}`;
                display += `<br>`;
            });

            document.getElementById('addedFixtures').innerHTML = display;
            document.getElementById('numberOfFixtures').value = '';

        }

        function calculateFixtureFlow() {

            let totalWSFU = 0;

            fixturesTotalWSFU.forEach((fixture) => {

                totalWSFU += +fixture.TOTAL_WSFU;
            });

            let gpm = 0;
            if (totalWSFU != 0) {
                gpm = calculateGPM(totalWSFU);
            }
            document.getElementById('fixtureResult').innerHTML = `Total WSFU: ${totalWSFU.toFixed(2)}<br>Flow Rate (GPM): ${gpm.toFixed(2)}`;
            return gpm
        }

        function calculateGPM(totalWSFU) {
            const lookupTable = {
                5: 15, 6: 17.4, 7: 19.8, 8: 22.2, 9: 24.6, 10: 27, 11: 27.8, 12: 28.6, 13: 29.4, 14: 30.2,
                15: 31, 16: 31.8, 17: 32.6, 18: 33.4, 19: 34.2, 20: 35, 25: 38, 30: 42, 35: 44, 40: 46,
                45: 48, 50: 50, 60: 54, 70: 58, 80: 61.2, 90: 64.3, 100: 67.5, 120: 73, 140: 77, 160: 81,
                180: 85.5, 200: 90, 225: 95.5, 250: 101, 275: 104.5, 300: 108, 400: 127, 500: 143,
                750: 177, 1000: 208, 1250: 239, 1500: 269, 1750: 297, 2000: 325, 2500: 380, 3000: 433,
                4000: 525, 5000: 593
            };

            const wsfuValues = Object.keys(lookupTable).map(Number);

            const nearestWSFU = wsfuValues.reduce((prev, curr) => {
                return (Math.abs(curr - totalWSFU) < Math.abs(prev - totalWSFU) ? curr : prev);
            });

            const gpm = lookupTable[nearestWSFU];

            return gpm;
        }

        function calculateIrrigationFlow() {
            event.preventDefault();

            const sprinklers = parseFloat(document.getElementById('irrigation_sprinklers').value);
            const flowRate = parseFloat(document.getElementById('irrigation_flow_rate').value);
            const duration = parseFloat(document.getElementById('irrigation_duration').value);

            const totalFlow = sprinklers * flowRate * duration;

            document.getElementById('irrigationResult').innerHTML = `Total Irrigation Flow Rate: ${totalFlow.toFixed(2)} GPM`;
            return totalFlow
        }

        function calculateTotalPumpFlow() {
            const totalIrrigationFlowRate = parseFloat(document.getElementById('total_irrigation_flow_rate').value);
            let fixtureGPM = calculateFixtureFlow();
            let irrigationGPM = totalIrrigationFlowRate;
            if (irrigationGPM == 0) {
                irrigationGPM = calculateIrrigationFlow();
                const simplexFlow = fixtureGPM + irrigationGPM;
                const duplexFlow = simplexFlow * 0.70;
                const triplexFlow = simplexFlow * 0.35;

                document.getElementById('pumpResult').innerHTML = `Simplex: ${simplexFlow.toFixed(2)} GPM<br>Duplex: ${duplexFlow.toFixed(2)} GPM<br>Triplex: ${triplexFlow.toFixed(2)} GPM`;
                return simplexFlow;
            }
            else {
                const simplexFlow = totalIrrigationFlowRate + fixtureGPM;
                const duplexFlow = simplexFlow * 0.70;
                const triplexFlow = simplexFlow * 0.35;

                document.getElementById('pumpResult').innerHTML = `Simplex: ${simplexFlow.toFixed(2)} GPM<br>Duplex: ${duplexFlow.toFixed(2)} GPM<br>Triplex: ${triplexFlow.toFixed(2)} GPM`;
                return simplexFlow;
            }
        }

        function DayTankDischargeLossesFittings() {
            const dayTankDischargeTPR = parseFloat(document.getElementById('day_tank_discharge_tpr').value);
            let dayTankDischargeLoF = (dayTankDischargeTPR / 100) * 10;

            document.getElementById('day_tank_discharge_lof').value = dayTankDischargeLoF.toFixed(2);
        }

        function calculateDayTankDischargeSide() {
            event.preventDefault();
            const dayTankDischargeLFPR = parseFloat(document.getElementById('day_tank_discharge_lf_pr').value);
            const dayTankDischargeLFHP = parseFloat(document.getElementById('day_tank_discharge_lf_hp').value);
            const dayTankDischargeTPR = parseFloat(document.getElementById('day_tank_discharge_tpr').value);
            const dayTankDischargeLoV = parseFloat(document.getElementById('day_tank_discharge_lov').value);
            const dayTankDischargeLoF = parseFloat(document.getElementById('day_tank_discharge_lof').value);

            let dayTankDischargeLF_feet = dayTankDischargeLFPR * 2.31;
            let dayTankDischargeLoOPR_feet = (dayTankDischargeTPR / 100) * 1.5;
            let dayTankDischargeLoV_feet = dayTankDischargeLoV * 2.31;

            let dayTankDischargeResult = dayTankDischargeLF_feet + dayTankDischargeLFHP + dayTankDischargeLoOPR_feet + dayTankDischargeLoV_feet + dayTankDischargeLoF;

            document.getElementById('DayTankDischargeResult').innerHTML = `Day Tank Discharge Side: ${dayTankDischargeResult.toFixed(2)} feet`;

            return dayTankDischargeResult;
        }

        function DayTankSuctionLossesFittings() {
            const dayTankSuctionTPR = parseFloat(document.getElementById('day_tank_suction_tpr').value);
            let dayTankSuctionLoF = (dayTankSuctionTPR / 100) * 10;

            document.getElementById('day_tank_suction_lof').value = dayTankSuctionLoF.toFixed(2);
        }

        function calculateDayTankSuctionSide() {
            event.preventDefault();

            const dayTankSuctionH = parseFloat(document.getElementById('day_tank_suction_h').value);
            const dayTankSuctionTPR = parseFloat(document.getElementById('day_tank_suction_tpr').value);
            const dayTankSuctionLoV = parseFloat(document.getElementById('day_tank_suction_lov').value);
            const dayTankSuctionLoF = parseFloat(document.getElementById('day_tank_suction_lof').value);

            let dayTankSuctionH_neg = dayTankSuctionH * -1;

            if (dayTankSuctionH < 0) {
                dayTankSuctionH_neg = dayTankSuctionH;
            }
            let dayTankSuctionLoOPR_feet = (dayTankSuctionTPR / 100) * 1.5;
            let dayTankSuctionLoV_feet = dayTankSuctionLoV * 2.31;

            let dayTankSuctionResult = dayTankSuctionH_neg + dayTankSuctionLoOPR_feet + dayTankSuctionLoV_feet + dayTankSuctionLoF;

            document.getElementById('DayTankSuctionResult').innerHTML = `Day Tank Suction Side: ${dayTankSuctionResult.toFixed(2)} feet`;

            return dayTankSuctionResult;
        }

        function DayTankTotalHeadBoosterPumpResult() {

            let dayTankTotalHeadOfBoosterPump = calculateDayTankDischargeSide() + calculateDayTankSuctionSide();

            document.getElementById('DayTankTotalHeadBoosterPumpResult').innerHTML = `Total Head of Booster Pump: ${dayTankTotalHeadOfBoosterPump.toFixed(2)} feet`;

            return dayTankTotalHeadOfBoosterPump;
        }


        function flowRateDayTankChartV190() {
            const canvas = document.getElementById("frdtv190");
            const ctx = canvas.getContext("2d");

            // Load your chart image (replace with your actual image URL)
            const chartImage = new Image();
            chartImage.src = "V190.png";

            const daytankTotalHead = DayTankTotalHeadBoosterPumpResult();
            const flowrateResult = calculateTotalPumpFlow();
            // Draw the chart image
            chartImage.onload = function () {
                ctx.drawImage(chartImage, 0, 0);

                // Draw a custom line (e.g., flow rate indicator)
                ctx.beginPath();
                ctx.moveTo(25, daytankTotalHead - 250); // Starting point (adjust coordinates)
                ctx.lineTo(flowrateResult + 80, daytankTotalHead - 250); // Ending point (adjust coordinates)
                ctx.moveTo(flowrateResult + 80, daytankTotalHead - 250); // Starting point (adjust coordinates)
                ctx.lineTo(flowrateResult + 80, 345); // Ending point (adjust coordinates)
                ctx.strokeStyle = "red"; // Line color
                ctx.lineWidth = 3; // Line width
                ctx.stroke();
            };
        }

        function flowRateDayTankChartV110() {
            const canvas = document.getElementById("frdtv110");
            const ctx = canvas.getContext("2d");

            // Load your chart image (replace with your actual image URL)
            const chartImage = new Image();
            chartImage.src = "V110.png";

            const daytankTotalHead = DayTankTotalHeadBoosterPumpResult();
            const flowrateResult = calculateTotalPumpFlow();
            // Draw the chart image
            chartImage.onload = function () {
                ctx.drawImage(chartImage, 0, 0);

                // Draw a custom line (e.g., flow rate indicator)
                ctx.beginPath();
                ctx.moveTo(25, daytankTotalHead - 250); // Starting point (adjust coordinates)
                ctx.lineTo(flowrateResult + 80, daytankTotalHead - 250); // Ending point (adjust coordinates)
                ctx.moveTo(flowrateResult + 80, daytankTotalHead - 250); // Starting point (adjust coordinates)
                ctx.lineTo(flowrateResult + 80, 345); // Ending point (adjust coordinates)
                ctx.strokeStyle = "red"; // Line color
                ctx.lineWidth = 3; // Line width
                ctx.stroke();
            };
        }

        function MunicipalLineDischargeLossesFittings() {
            const municipalLineDischargeTPR = parseFloat(document.getElementById('municipal_line_discharge_tpr').value);
            let municipalLineDischargeLoF = (municipalLineDischargeTPR / 100) * 10;

            document.getElementById('municipal_line_discharge_lof').value = municipalLineDischargeLoF.toFixed(2);
        }

        function calculateMunicipalLineDischargeSide() {
            event.preventDefault()
            const municipalLineDischargeLFPR = parseFloat(document.getElementById('municipal_line_discharge_lf_pr').value);
            const municipalLineDischargeLFHP = parseFloat(document.getElementById('municipal_line_discharge_lf_hp').value);
            const municipalLineDischargeTPR = parseFloat(document.getElementById('municipal_line_discharge_tpr').value);
            const municipalLineDischargeLoF = parseFloat(document.getElementById('municipal_line_discharge_lof').value);

            let municipalLineDischargeLF_feet = municipalLineDischargeLFPR * 2.31;
            let municipalLineDischargeLoOPR_feet = (municipalLineDischargeTPR / 100) * 1.5;
            let municipalLineDischargeLoV_feet = 5 * 2.31;

            let municipalLineDischargeResult = municipalLineDischargeLF_feet + municipalLineDischargeLFHP + municipalLineDischargeLoOPR_feet + municipalLineDischargeLoV_feet + municipalLineDischargeLoF;

            if (municipalLineDischargeLFPR == 0 && municipalLineDischargeLFPR == 0 && municipalLineDischargeTPR == 0 && municipalLineDischargeLoF == 0) {
                municipalLineDischargeResult = 0;
            }
            document.getElementById('MunicipalLineDischargeResult').innerHTML = `Municipal Line Discharge Side: ${municipalLineDischargeResult.toFixed(2)} feet`;

            return municipalLineDischargeResult;
        }

        function MunicipalLineSuctionLossesFittings() {
            const municipalLineSuctionTPR = parseFloat(document.getElementById('municipal_line_suction_tpr').value);
            let municipalLineSuctionLoF = (municipalLineSuctionTPR / 100) * 10;

            document.getElementById('municipal_line_suction_lof').value = municipalLineSuctionLoF.toFixed(2);
        }

        function calculateMunicipalLineSuctionSide() {
            event.preventDefault()
            const municipalLineSuctionP = parseFloat(document.getElementById('municipal_line_suction_p').value);
            const municipalLineSuctionTPR = parseFloat(document.getElementById('municipal_line_suction_tpr').value);
            const municipalLineSuctionLoF = parseFloat(document.getElementById('municipal_line_suction_lof').value);

            let municipalLineSuction_neg_feet = municipalLineSuctionP * 2.31 * -1;

            if (municipalLineSuctionP < 0) {
                municipalLineSuction_neg_feet = municipalLineSuctionP * 2.31;
            }
            let municipalLineSuctionLoOPR_feet = (municipalLineSuctionTPR / 100) * 1.5;
            let municipalLineSuctionLoV_feet = 5 * 2.31;

            let municipalLineSuctionResult = municipalLineSuction_neg_feet + municipalLineSuctionLoOPR_feet + municipalLineSuctionLoV_feet + municipalLineSuctionLoF;

            if (municipalLineSuctionP == 0 && municipalLineSuctionTPR == 0 && municipalLineSuctionLoF == 0) {
                municipalLineSuctionResult = 0;
            }
            document.getElementById('MunicipalLineSuctionResult').innerHTML = `Municipal Line Suction Side: ${municipalLineSuctionResult.toFixed(2)} feet`;

            return municipalLineSuctionResult;
        }

        function MunicipalLineTotalHeadBoosterPumpResult() {

            let municipalLineTotalHeadOfBoosterPump = calculateMunicipalLineDischargeSide() + calculateMunicipalLineSuctionSide();

            document.getElementById('MunicipalLineTotalHeadBoosterPumpResult').innerHTML = `Total Head of Booster Pump: ${municipalLineTotalHeadOfBoosterPump.toFixed(2)} feet`;

            return municipalLineTotalHeadOfBoosterPump;
        }


        function flowRateMunicipalLineChartV190() {
            const canvas = document.getElementById("frmlv190");
            const ctx = canvas.getContext("2d");

            // Load your chart image (replace with your actual image URL)
            const chartImage = new Image();
            chartImage.src = "V190.png";

            const daytankTotalHead = DayTankTotalHeadBoosterPumpResult();
            const flowrateResult = calculateTotalPumpFlow();
            // Draw the chart image
            chartImage.onload = function () {
                ctx.drawImage(chartImage, 0, 0);

                // Draw a custom line (e.g., flow rate indicator)
                ctx.beginPath();
                ctx.moveTo(25, daytankTotalHead - 250); // Starting point (adjust coordinates)
                ctx.lineTo(flowrateResult + 80, daytankTotalHead - 250); // Ending point (adjust coordinates)
                ctx.moveTo(flowrateResult + 80, daytankTotalHead - 250); // Starting point (adjust coordinates)
                ctx.lineTo(flowrateResult + 80, 345); // Ending point (adjust coordinates)
                ctx.strokeStyle = "red"; // Line color
                ctx.lineWidth = 3; // Line width
                ctx.stroke();
            };
        }

        function flowRateMunicipalLineChartV110() {
            const canvas = document.getElementById("frmlv110");
            const ctx = canvas.getContext("2d");

            // Load your chart image (replace with your actual image URL)
            const chartImage = new Image();
            chartImage.src = "V110.png";

            const daytankTotalHead = DayTankTotalHeadBoosterPumpResult();
            const flowrateResult = calculateTotalPumpFlow();
            // Draw the chart image
            chartImage.onload = function () {
                ctx.drawImage(chartImage, 0, 0);

                // Draw a custom line (e.g., flow rate indicator)
                ctx.beginPath();
                ctx.moveTo(25, daytankTotalHead - 250); // Starting point (adjust coordinates)
                ctx.lineTo(flowrateResult + 80, daytankTotalHead - 250); // Ending point (adjust coordinates)
                ctx.moveTo(flowrateResult + 80, daytankTotalHead - 250); // Starting point (adjust coordinates)
                ctx.lineTo(flowrateResult + 80, 345); // Ending point (adjust coordinates)
                ctx.strokeStyle = "red"; // Line color
                ctx.lineWidth = 3; // Line width
                ctx.stroke();
            };
        }

        function printPage() {
            window.print();
        }
    </script>
</body>

</html>